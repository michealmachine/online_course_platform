在线课程教学系统 - 顶层设计文档 (当前版本)

1. 系统概述

系统名称: 在线课程教学系统

系统目标: 构建一个基于微服务架构的在线课程教学平台，满足用户、机构和运营等角色的需求，提供全面的在线学习体验和高效的平台管理功能。

目标用户角色:

用户 (学生): 注册学习课程，参与在线考试，进行课程评价等。

机构 (课程提供方): 入驻平台，发布和管理课程，查看数据报表等。

运营 (平台管理员): 平台日常运营管理，用户和机构管理，课程审核，数据分析等。

2. 架构风格

微服务架构: 系统采用微服务架构模式进行构建，将系统拆分为多个独立部署、独立运行、自治的服务。

API 驱动: 服务之间通过定义良好的 RESTful API (RESTful HTTP) 进行同步通信，使用消息队列进行异步通信。

云原生: 系统设计考虑云原生特性，为后续容器化部署和云平台迁移做好准备，初期以 Docker 容器化部署为主。

3. 服务划分 (微服务分解)

系统划分为以下微服务 (共 13 个，认证服务初期可合并到用户服务):

服务名称	核心职责
用户服务 (User Service)	用户身份管理、认证和授权，用户账户管理，用户信息维护，角色权限管理。
机构服务 (Organization Service)	机构入驻、管理和信息维护，机构信息管理，机构用户管理，机构课程管理，初步的机构数据分析。
课程服务 (Course Service)	课程的创建、编辑、发布和管理，课程元数据管理，课程内容组织，课程发布流程管理，课程检索和展示。 (你的 content-service 属于此类)
学习服务 (Learning Service)	用户的学习行为跟踪和管理，学习行为记录，学习进度计算，学习数据统计，学习计划管理。
考试服务 (Exam Service)	题库、试卷和在线考试管理，题库维护，试卷生成，在线考试流程控制，自动/人工判卷，成绩管理。
评价服务 (Evaluation Service)	课程评价和评论管理，评价收集，评价展示，评价审核，评分计算。
交易服务 (Transaction Service)	订单、支付和结算管理，订单创建和管理，支付网关集成，交易流程控制，结算管理。
媒资服务 (Media Service)	媒体文件的存储、处理和分发，文件上传和管理，媒体资源处理 (转码、压缩等)，媒体资源存储，CDN 集成。 (你的 media-service 属于此类)
搜索服务 (Search Service)	课程、机构等信息的全文搜索，数据索引构建，全文搜索，搜索结果优化。
任务调度服务 (Task Scheduling Service)	定时任务的管理和执行，定时任务管理，任务调度执行，任务监控和告警。
通知服务 (Notification Service)	消息的发送和管理，消息发送通道管理，消息模板管理，消息发送记录管理。
统计分析服务 (Analytics Service)	学习和运营数据的统计和分析，数据采集，数据分析，报表生成，数据可视化。
API 网关 (API Gateway)	请求路由、安全认证、流量控制，请求路由，API 鉴权，流量控制，API 文档管理。
认证服务 (Authentication Service) (初期合并到用户服务)	用户身份认证和 Token 管理，用户认证，Token 生成和验证，授权管理 (后期独立后)。
4. 技术栈选择 (当前确定)

组件/服务	技术选型	备注和说明
微服务框架	Spring Cloud (Java)	主流、成熟的微服务框架，生态完善
编程语言	Java (为主)	团队技术栈主要为 Java，可根据服务特点考虑其他语言
服务注册与发现	Consul	功能强大，集注册发现、配置管理、健康检查于一体，简化技术栈
配置中心	Consul (推荐) / Spring Cloud Config (可选)	优先推荐 Consul: 统一技术栈，降低复杂度。 Spring Cloud Config (备选): 如果你更熟悉 Spring Cloud Config，也可以选择，但可能需要引入 Spring Cloud Bus。
消息队列	Spring Cloud Stream (具体队列待定)	消息门面，解耦队列实现，初期队列选择 RabbitMQ、Kafka、RocketMQ 均可，根据熟悉程度和资源情况决定，可先尝试 RabbitMQ。
容器化部署	Docker	容器化部署，轻量级，易于管理，为后续 K8s 扩展打下基础，初期 Docker 单机部署即可。
熔断、限流、重试	Resilience4j	轻量级、功能强大、易于使用的容错库，与 Spring Cloud 集成方便，优于 Netflix Hystrix。
链路追踪	SkyWalking	优秀的国产开源链路追踪工具，功能强大，对 Spring Cloud 应用支持良好，用于微服务问题排查和性能分析。
任务调度	XXL-Job (推荐) / Spring Task (备选)	推荐 XXL-Job: 分布式调度能力强，管理界面完善，适合多实例服务。 Spring Task (备选): 简单任务调度场景可用，分布式能力较弱。
数据库	MySQL (关系型), Redis (缓存和分布式锁)	MySQL: 关系型数据库，存储结构化数据，初期单机，预留分库分表空间。 Redis: 高性能缓存，用于热点数据缓存和分布式锁，提升性能和解决并发问题。
ORM 框架	Spring Data JPA	简化数据库操作，面向对象，提高开发效率，避免手写大量 SQL。
API 网关	Spring Cloud Gateway	Spring Cloud 官方推荐，与 Spring Cloud 生态集成度高，功能强大，性能良好，作为微服务系统入口网关。
前端网页	Next.js	React 生态流行的服务端渲染框架，性能优秀，开发体验好，提升用户体验和 SEO。
移动端 App	Android Native (Jetpack 库)	Android 原生开发，结合 Jetpack 库，充分发挥平台性能，提供最佳用户体验，高效规范 Android 开发。
日志	Filebeat + Elasticsearch (初期)	轻量级日志方案，Filebeat 收集日志，Elasticsearch 存储和查询，初期简化日志系统，后续可扩展为 ELK Stack。
5. 关键架构原则

API-First 设计: 优先进行 API 接口设计，服务之间通过 API 协作。

迭代开发: 采用迭代式开发模式，逐步完善系统功能。

微服务自治: 每个微服务独立部署、独立升级、技术选型灵活。

数据最终一致性: 在分布式事务场景下，优先考虑最终一致性，可采用补偿事务等模式。

高可用和可扩展: 系统设计考虑高可用和可扩展性，为应对高并发和业务增长做好准备。

安全性: 系统设计和开发过程中，重视安全性，包括身份认证、授权、数据加密、安全审计等。

可监控和可观测: 系统需要具备完善的监控和日志体系，方便运维和问题排查。

轻量级和务实: 毕业设计项目初期，优先选择轻量级、易于上手、能够快速验证 MVP 功能的技术方案，避免过度复杂的设计。