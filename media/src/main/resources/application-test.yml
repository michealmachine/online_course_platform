server:
  port: 8082

spring:
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 5MB        # 单个文件大小限制
      max-request-size: 10MB    # 总请求大小限制
      enabled: true
  application:
    name: media-service
  cloud:
    consul:
      host: localhost
      port: 8500
      discovery:
        heartbeat:
          enabled: true
          ttl: 30
        service-name: ${spring.application.name}
    openfeign:
      client:
        config:
          default:
            connectTimeout: 5000
            readTimeout: 5000
      circuitbreaker:
        enabled: true

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/media?serverTimezone=Asia/Shanghai&characterEncoding=utf-8
    username: root
    password: root

  jpa:
    database-platform: org.hibernate.dialect.MySQL8Dialect
    show-sql: true
    hibernate:
      ddl-auto: update

  data:
    redis:
      host: localhost
      port: 6379
      database: 0
      timeout: 5000
      lettuce:
        pool:
          max-active: 8
          max-wait: -1ms
          max-idle: 8
          min-idle: 0

# MinIO配置
minio:
  endpoint: http://localhost:9000
  accessKey: root
  secretKey: rootroot
  bucketName: media

# AWS S3配置
aws:
  s3:
    endpoint: http://localhost:9000  # 使用 MinIO 作为 S3 兼容服务
    region: us-east-1               # 区域，使用 MinIO 时可以是任意值
    access-key: root        # 访问密钥，与 MinIO 相同
    secret-key: rootroot        # 密钥，与 MinIO 相同
    bucket-name: media             # 存储桶名称，与 MinIO 相同
    path-style-access: true        # 启用路径样式访问

# 媒体文件配置
media:
  image:
    allowed-types:
      - image/jpeg
      - image/jpg
      - image/png
      - image/gif
    max-size: 10485760  # 10MB
    min-size: 1024      # 1KB
  video:
    allowed-types:
      - video/mp4
      - video/x-msvideo
      - video/quicktime
    max-size: 524288000  # 500MB
    min-size: 1048576    # 1MB
  upload:
    chunk-size: 5242880  # 分片大小，默认 5MB
    expiration: 3600     # 预签名 URL 过期时间，默认 1 小时
    max-parts: 10000     # 最大分片数
    min-part-size: 5242880  # 最小分片大小，默认 5MB
    temp-dir: ${java.io.tmpdir}/media/upload  # 临时文件目录



